@model ProductViewModel
@{
    int max = Model.Spec.Rest.Length;
    var max_per_row = Model.Spec.ItemsPerRow;
    var num_of_rows = (Model.Spec.Rest.Length + Model.Spec.First.Length) / max_per_row;
}

<!--<div class="container mt-5">
    <div class="row mb-5">
        <div class="col-lg-4 col-sm-12 d-flex flex-column justify-content-between single-product-card">
            <img src="data:image/png;base64, @Model.Img" class="img-fluid" alt="Alternate Text" id="product-image" />
            <div class="row justify-content-center">
                <div class="col">
                    <img src="data:image/png;base64, @Model.Img" alt="Alternate Text" class="img-fluid gallery-image" id="item-image" style="width: 18rem;" />
                </div>
                @{
                    foreach (var item in Model.GalleryImages) {
                        <div class="col">
                            <img src="data:image/png;base64, @item" alt="Alternate Text" class="img-fluid gallery-image" style="width: 18rem;" />
                        </div>
                    }
                }

            </div>
        </div>
        <div class="col-lg-4 col-sm-12 d-flex flex-column justify-content-between single-product-card">
            <div style="margin-bottom: 3rem;">
                <p class="display-4" id="item-name">@Model.Name</p>
                <hr class="grey-hr" />
                <p>Шифра: 1337-101-420</p>
                <p>
                    Категории: @foreach (var i in Model.Categories) {
                        <span><a href="#">@i.Name</a></span>
                    }
                </p>
                <p>Бренд: Momordika</p>
                <hr class="grey-hr" />-->
@*<p>Опис: @Model.Description</p>*@
<!--<p>> Универзална тревна мешавина за сончеви површини идеалното решение за вистинскиот домаќин</p>
            <p>> Бара често оддржување  и наводнување за да ја постигне својата убавина</p>
            <p>> 30-40 дена до никнување на сите семиња во новонаправениот тревник</p>
        </div>
        <div>
            <a href="#">види спецификација</a>
            <div class="d-flex align-items-center justify-content-between mt-2">
                @if (Model.InStock) {
                    <i class="far fa-check-circle fa-3x pr-3" style="color: green;"></i>
                    <p class="m-0 h4">Производот е на залиха</p>
                }
                else {
                    <i class="fas fa-times fa-3x pr-3" style="color: red;"></i>
                    <p class="m-0 h4">Производот моментално не е на залиха</p>
                }
            </div>
            <hr class="grey-hr mb-0" />
        </div>
    </div>
    <div class="col-lg-4 col-sm-12 d-flex flex-column justify-content-between single-product-card">
        <div class="container-fluid">
            @{
                foreach (var item in Model.Variations) {
                    <div class="form-group">
                        <label for="select-@item.Name">@item.Name</label>
                        <select class="form-control variation-select" id="select-@item.Name">
                            @foreach (var option in item.Options) {
                                <option value="@option">@option</option>
                            }

                        </select>
                    </div>
                }


            }
        </div>
        <div class="container-fluid">

            @if (Model.OnSale) {
                <hr class="grey-hr" />
                <div class="mb-2 p-3" style="border-radius: 4px; background-color: green; color: white;">
                    <div class="d-flex justify-content-between align-items-center" style="border-bottom: 1px white solid">
                        <p class="mb-0">Промотивна цена:</p>
                        <p class="mb-0" id="item-price">@Model.SalePrice</p>
                    </div>
                </div>
                <div class="d-flex justify-content-between">
                    <p>Редовна цена:</p>
                    <p>@Model.Price</p>
                </div>
            }
            else {
                <div class="mb-2 p-3" style="border-radius: 4px; background-color: green; color: white; opacity: 0;">
                    <div class="d-flex justify-content-between align-items-center" style="border-bottom: 1px white solid">
                        <p class="mb-0">Промотивна цена:</p>
                        <p class="mb-0">666</p>
                    </div>
                </div>
                <hr class="grey-hr" />
                <div class="d-flex justify-content-between">
                    <p>Редовна цена:</p>
                    <p id="item-price">@Model.Price</p>
                </div>
            }
            <div class="d-flex justify-content-between align-items-center">
                <div class="form-group mb-0">
                    <input type="number" id="item-quantity" name="quantity" min="1" value="1">
                </div>
                <button type="button" class="btn btn-success" id="add-to-cart">Додади<i class="fas fa-shopping-cart"></i><span id="item-id" style="display: none;">@Model.ProductId</span></button>
            </div>

        </div>
    </div>
</div>


<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
        <a class="nav-link active" id="spec-tab" data-toggle="tab" href="#spec" role="tab" aria-controls="spec" aria-selected="true">Spec</a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link" id="description-tab" data-toggle="tab" href="#description" role="tab" aria-controls="description" aria-selected="false">Description</a>
    </li>
</ul>-->
@*<div class="tab-content" id="table-content">
        <div class="tab-pane fade show active" id="spec" role="tabpanel" aria-labelledby="spec-tab">
            <h1>Spec Tab</h1>
            <table class="table table-striped">
                <thead>
                    <tr>
                        @for (int j = 0; j < max_per_row; j++) {
                            <th scope="col">@Model.Spec.First[j]</th>
                        }
                    </tr>
                </thead>
                <tbody>
                    @{ int start = 0;}
                    @for (int i = 1; i < num_of_rows; i++) {
                        <tr>
                            @for (int k = start; k < (start + max_per_row); k++) {
                                <th>@Model.Spec.Rest[k]</th>
                            }
                        </tr>
                        start += max_per_row;
                    }
                </tbody>

            </table>
        </div>
        <div class="tab-pane fade" id="description" role="tabpanel" aria-labelledby="description-tab">
            <h1>description Tab </h1>
        </div>
    </div>*@
<!--</div>-->
@* /////////////////////////////////////////////////////////////////////////////////////*@

<!-- Breadcrumb Section Begin -->
<div class="breacrumb-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb-text product-more">
                    <a href="./home.html"><i class="fa fa-home"></i> Home</a>
                    <a href="./shop.html">Shop</a>
                    <span>Detail</span>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Breadcrumb Section Begin -->
<!-- Product Shop Section Begin -->
<section class="product-shop spad page-details">
    <div class="container">
        <div class="row">
            <div class="col-lg-9">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="product-pic-zoom">
                            <img class="product-big-img" src="data:image/png;base64, @Model.Img" id="item-image" alt="">
                            @*<div class="zoom-icon">
                                <i class="fa fa-search-plus"></i>
                            </div>*@
                        </div>
                        <div class="product-thumbs">
                            <div class="product-thumbs-track ps-slider owl-carousel">
                                <div class="pt active" data-imgbigurl="data:image/png;base64, @Model.Img" style="width: 96px;">
                                    <img src="data:image/png;base64, @Model.Img" alt="" />
                                </div>
                                @foreach (var item in Model.GalleryImages) {
                                    <div class="pt " data-imgbigurl="data:image/png;base64, @item" style="width: 96px;">
                                        <img src="data:image/png;base64, @item" alt=""  />
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="product-details">
                            <div class="pd-title">
                                <span>@Model.Categories.FirstOrDefault().Name</span>
                                <h3 id="item-name">@Model.Name</h3>
                                <a href="#" class="heart-icon"><i class="icon_heart_alt"></i></a>
                            </div>
                            @*<div class="pd-rating">
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-o"></i>
                                    <span>(5)</span>
                                </div>*@
                            <div class="pd-desc">
                                <p>
                                    @Model.Description
                                </p>
                                @if (Model.OnSale) {
                                    <h4 id="item-price">@Model.SalePrice ДЕН<span>@Model.Price ДЕН</span></h4>
                                }
                                else {
                            <h4 id="item-price">@Model.Price ДЕН</h4>
                                }
                            </div>
                            @*<div class="pd-color">
                                    <h6>Color</h6>
                                    <div class="pd-color-choose">
                                        <div class="cc-item">
                                            <input type="radio" id="cc-black">
                                            <label for="cc-black"></label>
                                        </div>
                                        <div class="cc-item">
                                            <input type="radio" id="cc-yellow">
                                            <label for="cc-yellow" class="cc-yellow"></label>
                                        </div>
                                        <div class="cc-item">
                                            <input type="radio" id="cc-violet">
                                            <label for="cc-violet" class="cc-violet"></label>
                                        </div>
                                    </div>
                                </div>*@
                            <div class="pd-size-choose">
                                @foreach (var item in Model.Variations) {
                                    <div class="form-group">
                                        <label for="select-@item.Name">@item.Name</label>
                                        <select class="form-control variation-select" id="select-@item.Name">
                                            @foreach (var option in item.Options) {
                                                <option value="@option">@option</option>
                                            }

                                        </select>
                                    </div>
                                }
                            </div>
                            <div class="quantity">
                                <div class="pro-qty">
                                    <input type="number" id="item-quantity" name="quantity" min="1" value="1">
                                    @*<input type="text" value="1">*@
                                </div>
                                <button class="primary-btn pd-cart" id="add-to-cart">Add To Cart<span id="item-id" style="display: none;">@Model.ProductId</span></button>
                            </div>
                            <ul class="pd-tags">

                                <li>
                                    <span>CATEGORIES</span>:
                                    @foreach (var i in Model.Categories) {
                                        <span><a href="#">@i.Name</a></span>
                                    }
                                </li>
                                @*<li><span>TAGS</span>: Clothing, T-shirt, Woman</li>*@
                            </ul>
                            <div class="pd-share">
                                <div class="p-code">Sku : 00012</div>
                                <div class="pd-social">
                                    <a href="#"><i class="ti-facebook"></i></a>
                                    <a href="#"><i class="ti-twitter-alt"></i></a>
                                    <a href="#"><i class="ti-linkedin"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="product-tab">
                    <div class="tab-item">
                        <ul class="nav" role="tablist">
                            <li>
                                <a class="active" data-toggle="tab" href="#tab-1" role="tab">DESCRIPTION</a>
                            </li>
                            <li>
                                <a data-toggle="tab" href="#tab-2" role="tab">SPECIFICATIONS</a>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-item-content">
                        <div class="tab-content">
                            <div class="tab-pane fade-in active" id="tab-1" role="tabpanel">
                                <div class="product-content">
                                    <div class="row">
                                        <div class="col-lg-7">
                                            <h5>Introduction</h5>
                                            <p>
                                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
                                                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim
                                                ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
                                                aliquip ex ea commodo consequat. Duis aute irure dolor in
                                            </p>
                                            <h5>Features</h5>
                                            <p>
                                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
                                                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim
                                                ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
                                                aliquip ex ea commodo consequat. Duis aute irure dolor in
                                            </p>
                                        </div>
                                        <div class="col-lg-5">
                                            <img src="img/product-single/tab-desc.jpg" alt="">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="tab-2" role="tabpanel">
                                <div class="specification-table">
                                    <table>
                                        <thead>
                                            <tr>
                                                @for (int j = 0; j < max_per_row; j++) {
                                                    <td class="p-catagory">@Model.Spec.First[j]</td>
                                                }
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @{ int start = 0;}
                                            @for (int i = 1; i < num_of_rows; i++) {
                                                <tr>
                                                    @for (int k = start; k < (start + max_per_row); k++) {
                                                        <td class="p-catagory">@Model.Spec.Rest[k]</td>
                                                    }
                                                </tr>
                                                start += max_per_row;
                                            }
                                        </tbody>



                                        @* <tr>
                                                <td class="p-catagory">Customer Rating</td>
                                                <td>
                                                    <div class="pd-rating">
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star-o"></i>
                                                        <span>(5)</span>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="p-catagory">Price</td>
                                                <td>
                                                    <div class="p-price">$495.00</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="p-catagory">Add To Cart</td>
                                                <td>
                                                    <div class="cart-add">+ add to cart</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="p-catagory">Availability</td>
                                                <td>
                                                    <div class="p-stock">22 in stock</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="p-catagory">Weight</td>
                                                <td>
                                                    <div class="p-weight">1,3kg</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="p-catagory">Size</td>
                                                <td>
                                                    <div class="p-size">Xxl</div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="p-catagory">Color</td>
                                                <td><span class="cs-color"></span></td>
                                            </tr>
                                            <tr>
                                                <td class="p-catagory">Sku</td>
                                                <td>
                                                    <div class="p-code">00012</div>
                                                </td>
                                            </tr>*@
                                    </table>
                                </div>
                            </div>
                            @*<div class="tab-pane fade" id="tab-3" role="tabpanel">
                                    <div class="customer-review-option">
                                        <h4>2 Comments</h4>
                                        <div class="comment-option">
                                            <div class="co-item">
                                                <div class="avatar-pic">
                                                    <img src="img/product-single/avatar-1.png" alt="">
                                                </div>
                                                <div class="avatar-text">
                                                    <div class="at-rating">
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star-o"></i>
                                                    </div>
                                                    <h5>Brandon Kelley <span>27 Aug 2019</span></h5>
                                                    <div class="at-reply">Nice !</div>
                                                </div>
                                            </div>
                                            <div class="co-item">
                                                <div class="avatar-pic">
                                                    <img src="img/product-single/avatar-2.png" alt="">
                                                </div>
                                                <div class="avatar-text">
                                                    <div class="at-rating">
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star"></i>
                                                        <i class="fa fa-star-o"></i>
                                                    </div>
                                                    <h5>Roy Banks <span>27 Aug 2019</span></h5>
                                                    <div class="at-reply">Nice !</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="personal-rating">
                                            <h6>Your Ratind</h6>
                                            <div class="rating">
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star-o"></i>
                                            </div>
                                        </div>
                                        <div class="leave-comment">
                                            <h4>Leave A Comment</h4>
                                            <form action="#" class="comment-form">
                                                <div class="row">
                                                    <div class="col-lg-6">
                                                        <input type="text" placeholder="Name">
                                                    </div>
                                                    <div class="col-lg-6">
                                                        <input type="text" placeholder="Email">
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <textarea placeholder="Messages"></textarea>
                                                        <button type="submit" class="site-btn">Send message</button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Product Shop Section End -->
<!-- Related Products Section End -->
<div class="related-products spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="section-title">
                    <h2>Related Products</h2>
                </div>
            </div>
        </div>
        <div class="row">
            @{
                int max_related;
                if (Model.RelatedProducts.Length > 4) {
                    max_related = 4;
                }
                else {
                    max_related = Model.RelatedProducts.Length;
                }
            }
            @for (int i = 0; i < max_related; i++) {
                <div class="col-lg-3 col-sm-6">
                    <div class="product-item">
                        <div class="pi-pic">
                            @{ var img = Convert.ToBase64String(@Model.RelatedProducts[i].Img);} 
                            <img src="data:image/png;base64, @img" alt="">
                            @if (Model.RelatedProducts[i].OnSale) {
                                <div class="sale">Sale</div>
                            }
                            <div class="icon">
                                <i class="icon_heart_alt"></i>
                            </div>
                            <ul>
                                <li class="w-icon active"><a asp-area="Store" asp-controller="Product" asp-action="Single" asp-route-id="@Model.RelatedProducts[i].ProductId" ><i class="icon_bag_alt"></i></a></li>
                                <li class="quick-view"><a asp-area="Store" asp-controller="Product" asp-action="Single" asp-route-id="@Model.RelatedProducts[i].ProductId">+ View</a></li>
                                <li class="w-icon"><a asp-area="Store" asp-controller="Product" asp-action="Single" asp-route-id="@Model.RelatedProducts[i].ProductId"><i class="fa fa-random"></i></a></li>
                            </ul>
                        </div>
                        <div class="pi-text">
                            <div class="catagory-name">@Model.RelatedProducts[i].Categories.FirstOrDefault().Name</div>
                            <a href="#">
                                <h5>@Model.RelatedProducts[i].Name</h5>
                            </a>
                            @if (Model.RelatedProducts[i].OnSale) {
                                <div class="product-price">
                                    $@Model.RelatedProducts[i].SalePrice
                                    <span>$@Model.RelatedProducts[i].Price</span>
                                </div>
                            }
                            else {
                                <div class="product-price">
                                    $@Model.RelatedProducts[i].Price
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }
            @*<div class="col-lg-3 col-sm-6">
                    <div class="product-item">
                        <div class="pi-pic">
                            <img src="img/products/women-2.jpg" alt="">
                            <div class="icon">
                                <i class="icon_heart_alt"></i>
                            </div>
                            <ul>
                                <li class="w-icon active"><a href="#"><i class="icon_bag_alt"></i></a></li>
                                <li class="quick-view"><a href="#">+ Quick View</a></li>
                                <li class="w-icon"><a href="#"><i class="fa fa-random"></i></a></li>
                            </ul>
                        </div>
                        <div class="pi-text">
                            <div class="catagory-name">Shoes</div>
                            <a href="#">
                                <h5>Guangzhou sweater</h5>
                            </a>
                            <div class="product-price">
                                $13.00
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <div class="product-item">
                        <div class="pi-pic">
                            <img src="img/products/women-3.jpg" alt="">
                            <div class="icon">
                                <i class="icon_heart_alt"></i>
                            </div>
                            <ul>
                                <li class="w-icon active"><a href="#"><i class="icon_bag_alt"></i></a></li>
                                <li class="quick-view"><a href="#">+ Quick View</a></li>
                                <li class="w-icon"><a href="#"><i class="fa fa-random"></i></a></li>
                            </ul>
                        </div>
                        <div class="pi-text">
                            <div class="catagory-name">Towel</div>
                            <a href="#">
                                <h5>Pure Pineapple</h5>
                            </a>
                            <div class="product-price">
                                $34.00
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <div class="product-item">
                        <div class="pi-pic">
                            <img src="img/products/women-4.jpg" alt="">
                            <div class="icon">
                                <i class="icon_heart_alt"></i>
                            </div>
                            <ul>
                                <li class="w-icon active"><a href="#"><i class="icon_bag_alt"></i></a></li>
                                <li class="quick-view"><a href="#">+ Quick View</a></li>
                                <li class="w-icon"><a href="#"><i class="fa fa-random"></i></a></li>
                            </ul>
                        </div>
                        <div class="pi-text">
                            <div class="catagory-name">Towel</div>
                            <a href="#">
                                <h5>Converse Shoes</h5>
                            </a>
                            <div class="product-price">
                                $34.00
                            </div>
                        </div>
                    </div>
                </div>*@
        </div>
    </div>
</div>
<!-- Related Products Section End -->
